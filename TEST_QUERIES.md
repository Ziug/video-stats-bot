# Тестовый набор запросов для Telegram-бота аналитики видео

## ПРОСТЫЕ ЗАПРОСЫ (уровень 1)

### Запрос 1.1: Общее количество видео
**Вопрос для бота:** Сколько всего видео в системе?
**Ожидаемый SQL:** 
```sql
SELECT COUNT(*) FROM videos
```
**Ожидаемый результат:** 358

---

### Запрос 1.2: Видео с определённым количеством просмотров
**Вопрос для бота:** Сколько видео набрало более 100000 просмотров?
**Ожидаемый SQL:**
```sql
SELECT COUNT(*) FROM videos WHERE views_count > 100000
```
**Ожидаемый результат:** 5

---

### Запрос 1.3: Максимальное количество просмотров у одного видео
**Вопрос для бота:** Какое максимальное количество просмотров у видео?
**Ожидаемый SQL:**
```sql
SELECT MAX(views_count) FROM videos
```
**Ожидаемый результат:** (число > 100000)

---

## СРЕДНИЕ ЗАПРОСЫ (уровень 2)

### Запрос 2.1: Видео за конкретный месяц
**Вопрос для бота:** Какое суммарное количество просмотров набрали все видео, опубликованные в июне 2025 года?
**Ожидаемый SQL:**
```sql
SELECT COALESCE(SUM(views_count),0) FROM videos 
WHERE EXTRACT(MONTH FROM video_created_at) = 6 
AND EXTRACT(YEAR FROM video_created_at) = 2025
```
**Ожидаемый результат:** 17668

---

### Запрос 2.2: Прирост просмотров за день
**Вопрос для бота:** На сколько просмотров в сумме выросли все видео 28 ноября 2025?
**Ожидаемый SQL:**
```sql
SELECT COALESCE(SUM(delta_views_count),0) FROM video_snapshots 
WHERE date(created_at) = '2025-11-28'
```
**Ожидаемый результат:** 14639

---

### Запрос 2.3: Количество видео в диапазоне дат
**Вопрос для бота:** Сколько видео было опубликовано с 1 ноября по 5 ноября 2025 включительно?
**Ожидаемый SQL:**
```sql
SELECT COUNT(*) FROM videos 
WHERE date(video_created_at) >= '2025-11-01' 
AND date(video_created_at) <= '2025-11-05'
```
**Ожидаемый результат:** (какой-то разумный результат)

---

## СЛОЖНЫЕ ЗАПРОСЫ (уровень 3)

### Запрос 3.1: JOIN с фильтром по креатору и времени
**Вопрос для бота:** На сколько просмотров суммарно выросли все видео креатора с id cd87be38b50b4fdd8342bb3c383f3c7d в промежутке с 10:00 до 15:00 (по тому времени, которое хранится в замерах) 28 ноября 2025 года?
**Ожидаемый SQL:**
```sql
SELECT COALESCE(SUM(vs.delta_views_count),0) FROM video_snapshots vs
JOIN videos v ON vs.video_id = v.id
WHERE v.creator_id = 'cd87be38b50b4fdd8342bb3c383f3c7d'
AND date(vs.created_at) = '2025-11-28'
AND EXTRACT(HOUR FROM vs.created_at) >= 10 
AND EXTRACT(HOUR FROM vs.created_at) < 15
```
**Ожидаемый результат:** 757

---

### Запрос 3.2: Уникальные видео с определённым условием
**Вопрос для бота:** Сколько разных видео получали новые просмотры 27 ноября 2025?
**Ожидаемый SQL:**
```sql
SELECT COUNT(DISTINCT video_id) FROM video_snapshots 
WHERE delta_views_count > 0 
AND date(created_at) = '2025-11-27'
```
**Ожидаемый результат:** 226

---

### Запрос 3.3: Минимальное значение за день для конкретного креатора
**Вопрос для бота:** Какое наименьшее количество лайков было у видео креатора с id cd87be38b50b4fdd8342bb3c383f3c7d на момент завершения снимков 28 ноября 2025?
**Ожидаемый SQL:**
```sql
SELECT COALESCE(MIN(vs.likes_count),0) FROM video_snapshots vs
JOIN videos v ON vs.video_id = v.id
WHERE v.creator_id = 'cd87be38b50b4fdd8342bb3c383f3c7d'
AND date(vs.created_at) = '2025-11-28'
```
**Ожидаемый результат:** (какое-то число)

---

## Инструкция по тестированию

1. Отправь каждый вопрос боту по одному
2. Скопируй точный ответ бота (числовое значение)
3. Скинь результаты в формате:
```
Запрос 1.1: ✓ 358 (правильно) / ✗ 100 (неправильно, ожидается 358)
Запрос 1.2: ✓ 5 (правильно)
...
```

Это поможет определить какие типы запросов работают хорошо, а какие нужно ещё улучшить!
